<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <title><%= title%></title>
</head>
<body>
    <!-- TODO: Navbar -->
    <header>
        <nav class="navbar navbar-expand-lg text-white p-3 mb-2 bg-dark position-relative">
            <div class="navbar-brand">List Users</div>
            <form action="" class="d-flex position-absolute end-0">
                <input class="form-control me-2" type="search" placeholder="by Id,Name,Email" name="" id="" aria-label="Search">
                <button class="btn btn-outline-success me-3">Search</button>
                <button class="btn btn-outline-success me-2">Add</button>
            </form>
        </nav>
    </header>

    <!-- TODO: Table view -->
    <div class="container">
        <table id="listUsers" class="table table-bordered table-hover table-striped">
            <thead class="table-dark">
                <tr class="text-center">
                    <td id="id" class="sorting">ID</td>
                    <td id="name" class="sorting">NAME</td>
                    <td id="email" class="sorting">EMAIL</td>
                    <td id="mobile" class="sorting">MOBILE</td>
                    <td>ACTION</td>
                </tr>
            </thead>
            <tbody>
                <% for(var i=0; i < users.length; i++) { %>
                    <tr>
                        <td class="text-center"><%= users[i].id %> </td>
                        <td><%= users[i].name %> </td>
                        <td><%= users[i].email %> </td>
                        <td class="text-end"><%= users[i].mobile %> </td>
                        <td class="text-center">
                            <button class="btn btn-success">Detail</button>
                            <button class="btn btn-success">Edit</button>
                            <button class="btn btn-danger">Delete</button>
                        </td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>
</body>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery-3.6.0.min.js"></script>
<script src="js/pagination.js"></script>
<script type="text/javascript">
    $(document).ready(async function() {
        var limit = 5;
        var page = 1;


        var users = await $.ajax({
            url: 'http://localhost:8080/user',
            type: 'get',
            dataType: 'json'
        });

        $('#listUsers').pagination(users, limit);

        $('select').on('change', function() {
            limit = this.value;

            $('#listUsers').pagination(users, limit);
            $('#after').remove();
        });

    })
</script>
</html>